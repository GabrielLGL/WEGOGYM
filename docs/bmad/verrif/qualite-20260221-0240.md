# Code mort & qualité — 20260221-0240

## Résumé : 4 problèmes confirmés + 1 zone informelle

---

### Code mort

| Fichier | Type | Élément |
|---------|------|---------|
| `components/AlertDialog.tsx:6` | Import inutilisé | `useModalState` importé mais jamais utilisé dans le fichier |

**Note :** Tous les autres exports sont consommés. Aucun composant/fichier orphelin détecté.

---

### TypeScript

| Fichier | Ligne | Problème |
|---------|-------|----------|
| — | — | ✅ Aucun `any` trouvé — typage strict respecté |
| `navigation/index.tsx:77` | 77 | `as string` sur `currentRoute.name` (safe, acceptable) |
| `screens/SettingsScreen.tsx:27` | 27 | `as AIProviderName` sur union discriminée (safe, acceptable) |

---

### Logs de production

| Fichier | Ligne |
|---------|-------|
| — | ✅ Tous les `console.*` sont guardés par `__DEV__` |

---

### Valeurs hardcodées

#### Couleurs (hors `theme/index.ts`)

| Fichier | Ligne | Valeur | Note |
|---------|-------|--------|------|
| `screens/ChartsScreen.tsx` | 277 | `` `rgba(0, 122, 255, ${opacity})` `` | = `colors.primary` sans opacité — contrainte chart lib |
| `screens/ChartsScreen.tsx` | 278 | `` `rgba(255, 255, 255, ${opacity})` `` | = `colors.text` sans opacité — contrainte chart lib |

**Correction suggérée :** Extraire en constantes nommées en haut de fichier :
```ts
const PRIMARY_RGB = '0, 122, 255'   // = colors.primary
const TEXT_RGB    = '255, 255, 255'  // = colors.text
color: (opacity = 1) => `rgba(${PRIMARY_RGB}, ${opacity})`,
```

#### Nombres magiques (non couverts par les tokens du thème)

Tokens disponibles — `spacing`: xs=4 sm=8 md=16 lg=24 xl=32 xxl=40 | `borderRadius`: sm=8 md=12 lg=20 | `fontSize`: xs=12 sm=14 md=16 lg=18 xl=20 xxl=24 xxxl=28

| Fichier | Ligne | Valeur | Token suggéré |
|---------|-------|--------|---------------|
| `components/CustomModal.tsx` | 100 | `marginBottom: 20` | `spacing.lg` (24) ou laisser si intentionnel |
| `components/CustomModal.tsx` | 105 | `gap: 10` | `spacing.sm` (8) — approximatif |
| `components/ExercisePickerModal.tsx` | 188 | `padding: 25` | `spacing.lg` (24) ≈ |
| `components/ExercisePickerModal.tsx` | 210,233,240 | `padding: 12` | `spacing.sm`/`spacing.md` — entre deux |
| `components/ErrorBoundary.tsx` | 97 | `fontSize: 48` | Intentionnel (icône géante) — laisser |
| `components/RestTimer.tsx` | 174 | `fontSize: 10` | Sous `fontSize.xs` (12) — intentionnel |
| `components/RestTimer.tsx` | 175 | `fontSize: 22` | Entre `fontSize.xl` (20) et `fontSize.xxl` (24) |
| `components/SessionItem.tsx` | 84 | `fontSize: 17` | Entre `fontSize.md` (16) et `fontSize.lg` (18) |
| `screens/AssistantScreen.tsx` | 705 | `fontSize: 26` | Entre `fontSize.xxl` (24) et `fontSize.xxxl` (28) |
| `screens/AssistantScreen.tsx` | 732 | `fontSize: 28` | = `fontSize.xxxl` — utiliser le token |
| `screens/HomeScreen.tsx` | 219,379 | `paddingBottom/Horizontal: 150/20` | Non mappables exactement |
| `screens/ExercisesScreen.tsx` | 284,303 | `paddingHorizontal: 20/15` | Entre `spacing.md` et `spacing.lg` |
| `screens/ChartsScreen.tsx` | 277-327 | Multiples (10,12,13,15,16,20,25...) | Styles pré-thème non migrés |

**Note globale :** Les screens `HomeScreen`, `ExercisesScreen`, `ChartsScreen` ont des styles écrits avant la mise en place du système de tokens. La migration complète serait une tâche `/do` dédiée.

---

### Conventions

| Fichier | Problème |
|---------|----------|
| `navigation/index.tsx:1-45` | Commentaires verbeux sur des imports évidents ("Importation de React et des hooks nécessaires") — cosmétique |
| `screens/SettingsScreen.tsx:385` | `borderRadius: 9` — intentionnel (cercle de 18x18, nécessite exactement 9) — pas un bug |

**TODOs / FIXMEs / HACKs :** ✅ Aucun trouvé

---

## Parallélisation des corrections

| # | Problème | Fichiers | Effort | Groupe |
|---|----------|----------|--------|--------|
| 1 | Supprimer import `useModalState` inutilisé | `AlertDialog.tsx` | Trivial (1 ligne) | A |
| 2 | Extraire constantes RGB pour chart | `ChartsScreen.tsx` | Petit (2 lignes + 2 constantes) | B |
| 3 | Remplacer `marginBottom: 20`, `gap: 10` | `CustomModal.tsx` | Trivial (2 valeurs) | B |
| 4 | Migration magic numbers screens pré-thème | `HomeScreen`, `ExercisesScreen`, `ChartsScreen`, `RestTimer`, `SessionItem`... | Moyen (multi-fichiers) | C |

Groupes : même lettre = mêmes fichiers (séquentiel). Lettres différentes = parallèle.
- **Claude Code 1 :** Groupe A — `AlertDialog.tsx` import
- **Claude Code 2 :** Groupe B — `ChartsScreen.tsx` + `CustomModal.tsx` (fichiers distincts → parallèle possible)
- **Claude Code 3 :** Groupe C — Migration magic numbers (optionnel, faible priorité)

---

## Score de santé — Qualité

| Catégorie | Résultat |
|-----------|----------|
| Code mort | ⚠️ 1 import inutilisé |
| TypeScript | ✅ 0 `any` |
| Logs production | ✅ 0 non-gardé |
| Couleurs hardcodées | ⚠️ 2 lignes (contrainte chart lib) |
| Nombres magiques | ⚠️ Répandus dans screens pré-thème |
| TODOs/FIXMEs | ✅ 0 |
| Conventions | ✅ Cohérent |

**Évaluation globale qualité : 85/100** — Base solide, TypeScript strict, logs disciplinés. Problèmes mineurs localisés.
