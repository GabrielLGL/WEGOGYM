# test(web/page) — Tests page principale (formulaire d'inscription)
Date : 2026-02-26 12:10

## Instruction
docs/bmad/prompts/20260226-1745-tests-web-D.md

## Rapport source
docs/bmad/prompts/20260226-1745-tests-web-D.md

## Classification
Type : test
Fichiers modifiés :
- `web/src/app/__tests__/page.test.tsx` (créé)

## Ce qui a été fait
Création du fichier de tests `web/src/app/__tests__/page.test.tsx` avec 6 tests couvrant :
- Présence du formulaire (champs email, prenom, bouton)
- Submit sans email → pas d'appel fetch
- Submit avec email → status "Inscription..." (loading)
- Réponse ok: true → message alert "Inscription reussie"
- Réponse ok: false → message alert erreur
- Vérification payload fetch (email + name)

Adaptation clé par rapport au prompt : le bouton utilise `"S\u2019inscrire"` (apostrophe courbe U+2019).
Regex adaptée à `/inscrire/i` (sans apostrophe) pour éviter le mismatch avec l'apostrophe droite du prompt.

Mocks jsdom : KoreLogo, BackgroundBlobs, ThemeToggle, ScrollReveal, global.fetch.

## Vérification
- TypeScript : ✅ (via vitest run sans erreur de compilation)
- Tests : ✅ 17 passed (6 page + 5 ThemeToggle + 5 subscribe + 1 smoke)
- Nouveau test créé : oui — page.test.tsx (6 tests)

## Documentation mise à jour
aucune

## Statut
✅ Résolu — 20260226-1210

## Commit
4a90ffc test(web/page): add 6 tests for subscription form on Home page
