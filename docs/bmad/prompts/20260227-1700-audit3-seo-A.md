<!-- v1.0 — 2026-02-27 -->
# Rapport — Audit 3 Site Kore — Groupe A : SEO & Métadonnées — 20260227-1700

## Objectif
Corriger les lacunes SEO identifiées dans `layout.tsx` et `sitemap.ts` : schema JSON-LD incomplet,
`theme-color` via API non officielle, `hreflang` manquant, et `lastModified` dynamique dans le sitemap.

## Fichiers concernés
- `web/src/app/layout.tsx`
- `web/src/app/sitemap.ts`

## Contexte technique
- Next.js App Router — Server Components
- `metadataBase` défini : `new URL("https://kore-app.com")` → les URLs relatives sont résolues automatiquement
- `npx tsc --noEmit` doit rester à 0 erreur (commande depuis `web/`)
- Ne pas modifier les autres fichiers (page.tsx, sections, etc.)

## Problèmes identifiés et corrections

### 1. `theme-color` non officiel (layout.tsx)
**Actuel :**
```ts
other: {
  "theme-color": "#6c5ce7",
},
```
**Problème :** `other` est une fuite hors de la Metadata API de Next.js. Depuis Next 14, `themeColor` est supporté nativement.

**Fix :**
```ts
themeColor: [
  { media: "(prefers-color-scheme: light)", color: "#6c5ce7" },
  { media: "(prefers-color-scheme: dark)", color: "#00cec9" },
],
```
Supprimer le bloc `other: { "theme-color": ... }`.

---

### 2. hreflang manquant (layout.tsx)
**Problème :** L'app est en français, aucun `hreflang` déclaré. Google peut mal indexer la langue cible.

**Fix :** Dans le bloc `alternates`, ajouter `languages` :
```ts
alternates: {
  canonical: "/",
  languages: {
    "fr": "https://kore-app.com",
    "x-default": "https://kore-app.com",
  },
},
```

---

### 3. JSON-LD incomplet (layout.tsx)
**Actuel :** Schema `SoftwareApplication` avec seulement `name`, `url`, `image`, `author`, `applicationCategory`, `operatingSystem`, `description`, `offers`.

**Manque :**
- `featureList` : liste de features (aide au rich snippet)
- `softwareVersion` : version publique
- `datePublished` : date de publication
- `inLanguage` : langue de l'app

**Fix :** Enrichir le JSON-LD existant (ne pas recréer de zéro) :
```ts
{
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  name: "Kore",
  url: "https://kore-app.com",
  image: "https://kore-app.com/og.png",
  inLanguage: "fr-FR",
  author: { "@type": "Organization", name: "Kore" },
  applicationCategory: "HealthApplication",
  operatingSystem: "Android",
  description: "Application de musculation offline-first. Suis tes programmes, enregistre tes performances et progresse séance après séance.",
  softwareVersion: "1.0",
  datePublished: "2026-01-01",
  featureList: [
    "Programmes de musculation personnalisés",
    "Suivi de performances et historique",
    "100% offline — aucune connexion requise",
    "Interface rapide et intuitive",
    "Statistiques et progression",
    "Objectifs et suivi de mensurations",
  ],
  offers: {
    "@type": "Offer",
    price: "0",
    priceCurrency: "EUR",
    availability: "https://schema.org/PreOrder",
  },
}
```

---

### 4. `lastModified` dynamique dans sitemap (sitemap.ts)
**Actuel :**
```ts
lastModified: new Date(),
```
**Problème :** `new Date()` change à chaque build → Google voit toutes les pages comme "modifiées" à chaque déploiement, ce qui dilue la pertinence du signal `lastModified`.

**Fix :** Dates statiques réalistes :
```ts
{
  url: "https://kore-app.com",
  lastModified: new Date("2026-02-27"),
  changeFrequency: "monthly",
  priority: 1,
},
{
  url: "https://kore-app.com/privacy",
  lastModified: new Date("2026-01-01"),
  changeFrequency: "yearly",
  priority: 0.3,
},
```

---

## Contraintes
- Ne pas toucher aux composants, sections, ou page.tsx
- Garder la structure Metadata de Next.js (ne pas utiliser de balises `<meta>` manuelles dans `<head>`)
- Le type `MetadataRoute.Sitemap` doit rester valide (le champ `languages` dans `alternates` est de type `Record<string, string | URL>`)
- `themeColor` est de type `ThemeColorDescriptor | ThemeColorDescriptor[]` — utiliser le tableau pour dark/light

## Critères de validation
- `npx tsc --noEmit` (depuis `web/`) → 0 erreur
- `curl https://kore-app.com/sitemap.xml` → dates statiques dans le XML (après déploiement)
- DevTools > Application > Manifest → `theme-color` visible
- Outils de test JSON-LD (ex: validator.schema.org) → schema valide

## Dépendances
Aucune dépendance — peut tourner en parallèle avec Groupes B et C.

## Statut
✅ Résolu — 20260227-1710

## Résolution
Rapport do : docs/bmad/do/20260227-1710-fix-seo-metadata.md
