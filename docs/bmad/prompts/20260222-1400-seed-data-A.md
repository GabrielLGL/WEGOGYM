<!-- v1.0 — 2026-02-22 -->
# Rapport — Jeu de données de test — Groupe A — 20260222-1400

## Objectif
Créer un fichier `mobile/src/model/seedDevData.ts` contenant une fonction `seedDevData()` qui peuple la base WatermelonDB avec un jeu de données réaliste pour tester tous les écrans de l'app. Ce fichier sera importé et appelé uniquement en mode `__DEV__`.

## Fichiers concernés
- `mobile/src/model/seedDevData.ts` — NOUVEAU : fonction de seed
- `mobile/src/model/seed.ts` — LECTURE SEULE (pour comprendre le pattern existant)
- `mobile/src/model/index.ts` — LECTURE SEULE (import de `database`)
- `mobile/src/model/models/*.ts` — LECTURE SEULE (modèles)

## Contexte technique
- WatermelonDB : toutes les mutations DOIVENT être dans `database.write()`
- Les exercices sont déjà seedés via `seedExercises()` dans `seed.ts`. La fonction `seedDevData()` doit être appelée APRÈS `seedExercises()`.
- Pattern existant : `prepareCreate` + `database.batch()` pour les inserts bulk.
- L'import du database : `import { database } from './index'`
- Muscles : liste depuis `constants.ts` — `['Pecs', 'Dos', 'Quadriceps', 'Ischios', 'Mollets', 'Trapèzes', 'Epaules', 'Biceps', 'Triceps', 'Abdos', 'Cardio']`
- Equipment : `['Poids libre', 'Machine', 'Poulies', 'Poids du corps']`
- Schema v17 (voir `schema.ts`)
- Langue de l'app : français
- Guard idempotent : si des programmes existent déjà → ne pas re-seeder

## Données à créer

### 1. Programmes (3)

**Programme 1 — "Push Pull Legs" (position 0)**
- Session "Push" (position 0) :
  - Développé Couché Barre (4×10, 80kg cible)
  - Développé Incliné Haltères (3×12, 30kg)
  - Écartés Poulie (3×15)
  - Développé Militaire (4×8, 50kg)
  - Élévations Latérales (3×15, 12kg)
  - Extensions Poulie Haute (3×12, 25kg)
- Session "Pull" (position 1) :
  - Tractions (4×8)
  - Rowing Barre (4×10, 70kg)
  - Tirage Poitrine (3×12, 55kg)
  - Face Pull (3×15, 20kg)
  - Curl Barre EZ (3×12, 30kg)
  - Curl Marteau (3×10, 14kg)
- Session "Legs" (position 2) :
  - Squat Arrière (5×5, 100kg)
  - Presse à Cuisses (4×12, 180kg)
  - Leg Extension (3×15, 40kg)
  - Soulevé de Terre Roumain (4×10, 80kg)
  - Leg Curl Allongé (3×12, 35kg)
  - Extensions Mollets Debout (4×15, 60kg)

**Programme 2 — "Full Body" (position 1)**
- Session "Full Body A" (position 0) :
  - Squat Arrière (4×8, 90kg)
  - Développé Couché Barre (4×8, 75kg)
  - Rowing Barre (4×8, 65kg)
  - Développé Militaire (3×10, 40kg)
  - Curl Haltères (3×12, 14kg)
- Session "Full Body B" (position 1) :
  - Soulevé de Terre (4×5, 120kg)
  - Développé Incliné Haltères (4×10, 28kg)
  - Tractions (4×8)
  - Élévations Latérales (3×15, 10kg)
  - Dips (Triceps focus) (3×10)

**Programme 3 — "Cardio & Abdos" (position 2)**
- Session "HIIT" (position 0) :
  - Tapis de Course (1×1)
  - Burpees (3×15)
  - Mountain Climbers (3×20)
  - Corde à sauter (3×1)
- Session "Core" (position 1) :
  - Crunch (4×20)
  - Relevé de jambes (3×15)
  - Planche (3×1)
  - Russian Twist (3×20, 10kg)
  - Gainage Latéral (3×1)

### 2. Historiques de séances (8-10 workouts sur les 30 derniers jours)

Créer des History avec des Sets pour simuler un mois d'entraînement :

| # | Session | Date (jours avant aujourd'hui) | Durée (min) | Note |
|---|---------|-------------------------------|-------------|------|
| 1 | Push | -28 | 65 | "Bonne séance, épaules chaudes" |
| 2 | Pull | -26 | 58 | null |
| 3 | Legs | -24 | 72 | "PR squat !" |
| 4 | Push | -21 | 60 | null |
| 5 | Pull | -19 | 55 | "Fatigue dos" |
| 6 | Legs | -17 | 70 | null |
| 7 | Full Body A | -14 | 50 | null |
| 8 | Push | -10 | 63 | "Augmenté DC à 85" |
| 9 | Pull | -7 | 57 | null |
| 10 | Legs | -3 | 75 | "Nouveau PR squat 110" |

Pour chaque History, créer les Sets correspondants aux exercices de la session.
Exemple pour History 1 (Push, -28j) :
- Développé Couché Barre : 4 sets (75kg×10, 75kg×10, 80kg×8, 80kg×8)
- Développé Incliné Haltères : 3 sets (28kg×12, 28kg×12, 30kg×10)
- Écartés Poulie : 3 sets (15kg×15, 15kg×15, 15kg×12)
- Développé Militaire : 4 sets (45kg×8, 45kg×8, 50kg×6, 50kg×6)
- Élévations Latérales : 3 sets (10kg×15, 10kg×15, 12kg×12)
- Extensions Poulie Haute : 3 sets (22kg×12, 22kg×12, 25kg×10)

Varier les poids/reps entre les séances pour montrer une progression.
Les dernières séances doivent avoir des poids légèrement supérieurs.
Mettre `is_pr: true` sur les sets qui sont des records (poids le plus élevé pour un exercice).

### 3. PerformanceLogs (résumés par séance)

Pour chaque History, créer un PerformanceLog pour chaque exercice réalisé dans cette séance avec les meilleurs chiffres de la séance :
- `sets`: nombre de sets réalisés
- `weight`: meilleur poids de la séance pour cet exercice
- `reps`: meilleur reps à ce poids

### 4. BodyMeasurements (4 entrées mensuelles)

| Date (jours avant) | Poids | Tour de taille | Hanches | Poitrine | Bras |
|---------------------|-------|----------------|---------|----------|------|
| -90 | 82.5 | 85 | 98 | 105 | 36 |
| -60 | 81.0 | 83 | 97 | 106 | 36.5 |
| -30 | 80.0 | 82 | 97 | 107 | 37 |
| -1 | 79.5 | 81 | 96 | 108 | 37.5 |

### 5. Utilisateur

L'utilisateur est déjà créé par `seedExercises()`. Mettre à jour :
- `name`: "Gabriel"
- `onboardingCompleted`: true
- `restDuration`: 90

## Étapes

1. Lire `mobile/src/model/seed.ts` et `mobile/src/model/index.ts` pour confirmer les patterns.
2. Lire les modèles dans `mobile/src/model/models/` pour confirmer les champs exacts.
3. Créer `mobile/src/model/seedDevData.ts` avec la fonction `seedDevData()`.
4. La fonction doit :
   a. Vérifier si des programmes existent déjà → skip si oui (idempotent)
   b. Récupérer les exercices par nom via `Q.where('name', ...)`
   c. Créer les programmes, sessions, session_exercises
   d. Créer les histories et sets
   e. Créer les performance logs
   f. Créer les body measurements
   g. Mettre à jour l'utilisateur
   h. Tout dans `database.write()` avec `database.batch()`
5. Vérifier le TypeScript : `npx tsc --noEmit`
6. Vérifier les tests : `npm test`

## Contraintes
- Ne pas modifier `seed.ts` (lecture seule)
- Ne pas modifier les modèles ni le schéma
- Toutes les mutations dans `database.write()`
- Pas de `console.log` sans guard `__DEV__`
- Pas de `any` — typer correctement
- Utiliser `prepareCreate` + `database.batch()` pour la performance
- IDs : laisser WatermelonDB les générer (ne pas hardcoder)
- Dates : calculer relativement à `Date.now()` pour rester réaliste

## Critères de validation
- `npx tsc --noEmit` → zéro erreur
- `npm test` → zéro fail
- L'app affiche :
  - 3 programmes sur HomeScreen
  - Sessions avec exercices sur SessionDetailScreen
  - Historique de séances sur ChartsScreen
  - Stats de durée, volume, calendrier, répartition, exercices
  - Mesures corporelles sur StatsMeasurementsScreen

## Dépendances
Aucune dépendance — groupe unique.

## Statut
⏳ En attente
