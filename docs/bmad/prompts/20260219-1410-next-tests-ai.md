# feat(tests) — Tests unitaires providers IA
Date : 2026-02-19 14:10

## Instruction
Ajouter des tests unitaires pour les 3 providers IA de WEGOGYM dans un nouveau fichier
`mobile/src/services/ai/__tests__/providers.test.ts`.
Stack : React Native Expo 52 + TypeScript strict + Jest

## Classification
Type : feat
Fichiers : `mobile/src/services/ai/__tests__/providers.test.ts` (nouveau)

## Ce qui a été fait
- Création d'un fichier de tests couvrant les 3 providers cloud : Claude, OpenAI, Gemini
- 3 tests par provider (9 tests au total) :
  1. **Succès** — mock fetch `ok=true` + JSON valide → vérifie le `GeneratedPlan` retourné
  2. **Erreur HTTP 401** — mock fetch `ok=false, status=401` → vérifie le message d'erreur spécifique
  3. **JSON malformé** — mock fetch `ok=true` mais texte non-JSON → vérifie que parseGeneratedPlan throw

### Stratégie de mock
- `global.fetch = mockFetch` (jest.fn()) dans `beforeAll`
- Polyfill `AbortSignal.timeout` pour compatibilité jsdom/Node < 18
- `mockFetch.mockClear()` dans `beforeEach`
- `parseGeneratedPlan` NON mocké → tests d'intégration légère validant la chaîne complète

## Vérification
- TypeScript : ✅ zéro erreur
- Tests : ✅ 9/9 passed (3.1s)
- Fichiers existants non modifiés : ✅

## Commit
⏳ En attente — groupe B
