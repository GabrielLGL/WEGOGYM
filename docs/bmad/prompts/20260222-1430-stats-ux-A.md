<!-- v1.0 — 2026-02-22 -->
# Rapport — Stats UX — Groupe A — 20260222-1430

## Objectif
Permettre de cliquer sur un point du graphique de durée des séances pour afficher les détails de la séance correspondante (date, durée, nom du programme/session si disponible).

## Fichiers concernés
- `mobile/src/screens/StatsDurationScreen.tsx`

## Contexte technique
- Utilise `react-native-chart-kit` (composant `LineChart`)
- `LineChart` supporte la prop `onDataPointClick` qui retourne `{ index, value, x, y, dataset }`
- Les données sont dans `stats.perSession` qui contient `{ date: number, durationMin: number }` (calculé par `computeDurationStats`)
- Le graphique affiche les 30 dernières séances avec `showDots: true`
- Theme : dark mode, utiliser `colors.*` et `spacing.*` depuis `theme/index.ts`
- Patterns : pas de `<Modal>` natif, utiliser un tooltip custom (simple `View` positionné)

## Etapes
1. Lire `StatsDurationScreen.tsx` pour comprendre la structure actuelle
2. Ajouter un state `selectedPoint` pour stocker l'index du point cliqué
3. Ajouter `onDataPointClick` au `LineChart` — quand un point est cliqué :
   - Stocker l'index du point
   - Afficher un tooltip (View avec position absolute ou inline) montrant :
     - La date complète (ex: "Lundi 15 février 2026")
     - La durée (ex: "45 min")
4. Si on reclique sur le même point ou ailleurs, le tooltip se ferme (toggle)
5. Styler le tooltip comme une carte (`colors.card`, `borderRadius.sm`, `colors.text`)
6. Vérifier avec `npx tsc --noEmit` qu'il n'y a pas d'erreur TypeScript

## Contraintes
- Ne pas casser le chart existant (labels, fromZero, formatYLabel)
- Ne pas modifier `statsHelpers.ts` (les données sont déjà suffisantes)
- Utiliser les couleurs du thème uniquement (`colors.*`)
- Pas de `<Modal>` natif (Fabric crash)

## Criteres de validation
- `npx tsc --noEmit` -> zero erreur
- Cliquer sur un point affiche un tooltip avec date + durée
- Cliquer à nouveau ferme le tooltip
- Le tooltip ne déborde pas de l'écran

## Dependances
Aucune dépendance

## Statut
✅ Résolu — 20260222-1800

## Résolution
Rapport do : docs/bmad/do/20260222-1800-feat-stats-duration-tooltip.md
