<!-- v1.0 — 2026-02-28 -->
# Rapport — Settings UI — Groupe A — 20260228-1430

## Objectif
Deux améliorations UX dans l'écran Settings :
1. Masquer les options timer liées (durée, vibration, son) quand le timer est désactivé
2. Rendre les lignes Niveau et Objectif visuellement cliquables (ajouter un chevron)

## Fichiers concernés
- `mobile/src/screens/SettingsScreen.tsx`

## Contexte technique
- Stack : React Native (Expo 52) + TypeScript + Fabric
- UI : neumorphisme épuré, Dark Mode only (`#121212` bg)
- Couleurs : via `useColors()` hook → `colors.*` — jamais hardcodé
- Icônes : `<Ionicons>` (déjà importé dans le fichier)
- i18n : `useLanguage()` → `{ t }` — toutes les strings passent par `t.*`
- Patterns : `TouchableOpacity` avec `activeOpacity={0.7}` pour les éléments cliquables

## Étapes

### Tâche 1 — Timer conditionnel (masquer les options liées)

Dans `SettingsScreen.tsx`, section Minuteur (~lignes 684-727) :

Les blocs suivants doivent être conditionnés par `{timerEnabled && (...)}` :
- Bloc "durée repos" (~ligne 684-701) : `<View style={styles.settingRow}>` contenant le `TextInput` pour la durée
- Bloc "vibration" (~ligne 703-714) : `<View style={styles.settingRow}>` contenant le `Switch` vibration
- Bloc "son" (~ligne 716-727) : `<View style={styles.settingRow}>` contenant le `Switch` son

Regrouper les 3 blocs dans un seul fragment conditionnel :
```tsx
{timerEnabled && (
  <>
    {/* Durée repos */}
    <View style={styles.settingRow}>...</View>
    {/* Vibration */}
    <View style={styles.settingRow}>...</View>
    {/* Son */}
    <View style={styles.settingRow}>...</View>
  </>
)}
```

### Tâche 2 — Level et Goal cliquables (ajouter chevron)

Dans la section "Mon profil", pour les deux TouchableOpacity "Niveau" et "Objectif" :

**Avant (ligne ~566-568 et ~594-596)** :
```tsx
<Text style={styles.infoValue}>
  {user?.userLevel ? t.onboarding.levels[user.userLevel as UserLevel] : t.settings.profile.notDefined}
</Text>
```

**Après** — remplacer le `<Text>` par un `<View>` avec le texte + chevron :
```tsx
<View style={{ flexDirection: 'row', alignItems: 'center', gap: 4 }}>
  <Text style={styles.infoValue}>
    {user?.userLevel ? t.onboarding.levels[user.userLevel as UserLevel] : t.settings.profile.notDefined}
  </Text>
  <Ionicons
    name={editingLevel ? 'chevron-down' : 'chevron-forward'}
    size={16}
    color={colors.primary}
  />
</View>
```

Faire pareil pour "Objectif" en utilisant `editingGoal` à la place de `editingLevel`.
L'icône change entre `chevron-forward` et `chevron-down` selon l'état d'expansion, pour indiquer visuellement que le panel est ouvert.

## Contraintes
- Ne PAS modifier les handlers (`handleToggleTimer`, `handleUpdateLevel`, etc.)
- Ne PAS modifier la logique DB
- Pas de couleurs hardcodées — utiliser `colors.*`
- Pas de `console.log` ni `console.warn` en dehors de `__DEV__`
- Respecter le style neumorphique existant

## Critères de validation
- `npx tsc --noEmit` → zéro erreur TypeScript
- `npm test` → zéro fail
- Visuellement : désactiver le timer → les 3 options disparaissent immédiatement
- Visuellement : les lignes Niveau et Objectif affichent un chevron → cliquer dessus le bascule et montre les options

## Dépendances
Aucune dépendance inter-groupes.

## Statut
⏳ En attente
